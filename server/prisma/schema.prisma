generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model rol {
  Id Int @id @default(autoincrement())
  Name String @db.VarChar(50)
  Description String @db.VarChar(255)
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
  UserRoles user_role[]
}

model position {
  Id Int @id @default(autoincrement())
  Name String @db.VarChar(50)
  Description String @db.VarChar(255)
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
  UserPositions user_position[]
  PositionSubtypes position_subtype[]
}

model position_subtype {
  Id Int @id @default(autoincrement())
  Name String @db.VarChar(50)
  Position position @relation(fields: [PositionId], references: [Id])
  PositionId Int
  Description String @db.VarChar(255)
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
}

model user {
  Id           String   @id @default(uuid()) @db.VarChar(36)
  Username     String   @unique @db.VarChar(20)
  Email        String   @unique @db.VarChar(50)
  Password     String   @db.VarChar(255)
  Age Int @db.SmallInt
  Verified     Boolean  @default(false)
  Availability Int      @default(1) @db.SmallInt
  Profile user_profile?
  Positions user_position[]
  UserRoles    user_role[]
  CreatedAt    DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt    DateTime @updatedAt @db.Timestamp(6)
  Validations  user_validation[]
}

model user_profile {
  Id Int @id @default(autoincrement())
  User user @relation(fields: [UserId], references: [Id])
  UserId String @unique @db.VarChar(36)
  Name String @db.VarChar(50)
  Lastname String @db.VarChar(50)
  Image String @db.VarChar(255)
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
}

model user_position {
  Id Int @id @default(autoincrement())
  User user @relation(fields: [UserId], references: [Id])
  UserId String @db.VarChar(36)
  Position position @relation(fields: [PositionId], references: [Id])
  PositionId Int
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
}

model user_role {
  Id Int @id @default(autoincrement())
  User user @relation(fields: [UserId], references: [Id])
  UserId String @unique @db.VarChar(36)
  Role rol @relation(fields: [RoleId], references: [Id])
  RoleId Int
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
}

model user_validation {
  Id Int @id @default(autoincrement())
  User user @relation(fields: [UserId], references: [Id])
  UserId String @unique @db.VarChar(36)
  Code String @db.VarChar(255)
  CreatedAt DateTime @default(now()) @db.Timestamp(6)
  UpdatedAt DateTime @updatedAt @db.Timestamp(6)
}